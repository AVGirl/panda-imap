		      C-Client Revision History

Note: Dates in this revision history indicate when the work was completed.

 1 June 1992	Creation.  Changes prior to this were not noted.

 1 June 1992	[tenex.c] Fixed tenex driver so that copying messages to an
		open mailbox does not hang.  Still need to have protection
		against multiple simultaneous attempts to append in this
		format.

 2 June 1992	[bezerk.c, imap2.c, mail.c/h, mh.c, mtest.c, news.c, tenex.c]
		Changed elt internal dates to be stored as numeric fields
		instead of strings.

 2 June 1992	[mail.c/h, mh.h, news.h, os_???.c] Moved months array from
		osdep stuff into main module.

 3 June 1992	[imap2.c] Repaired small memory leaks in IMAP MIME support.

 3 June 1992	[os_hpp.c/h] Emulate gethostid () on HP/UX.

 3 June 1992	[imapd.c, ms.c, InfoPanel.nib, MBoxWindow.m, ReadWindow.m,
		 ReplyWindow.m, Utilities.m] Updated c-client bundled tools
		to use new internal date strategy.

 4 June 1992	[rfc822.c] Fixed gruesome bogosity in rfc822_8bit.

 7 June 1992	[bezerk.c/h, tenex.c/h, mh.c/h, news.c/h] Removed `date'
		per-message local driver variables; use the numeric dates
		stored in the elt internal date instead.

 8 June 1992	[mail.c/h] Made it portable to DOS and Mac once again.

 8 June 1992	[rfc822.c] Fixed a couple of bugs in quoted-printable encoding.
		It seems that people are actually trying to use the QP support!

 8 June 1992	[bezerk.c/h, dummy.c/h, imap2.c/h, mail.c/h, mbox.c, mh.c/h,
		 mtest.c, news.c/h, tenex.c/h] Created the concept of `long'
		vs. `short' caching.  Modified all drivers to know about the
		new mechanism.  The mail_fetchenvelope() function is now
		history, and is replaced by mail_fetchstructure() which has a
		new argument, a pointer to a destination body pointer.

 9 June 1992	[MBoxWindow.m, ReadWindow.m, ReplyWindow.m/h] Update
		MailManager to know about long elt's.

 9 June 1992	[bezerk.c, imap2.c, mh.c, news.c, tenex.c] Implement short
		cache support in all drivers.

10 June 1992	[mail.c/h, tenex.c] Change API for mail_open() so that the
		third argument (formerly debug) is now an options bitmask.
		The options are defined in mail.h

10 June 1992	[mtest.c, ms.c, imapd.c, MailManager.m] Update main programs
		to know about new mail_open() API.

11 June 1992	[bezerk.c, imap2.c, mh.c, news.c, tenex.c] Fix bug in returning
		bodies from mail_fetchstructure().

16 June 1992	[bezerk.c, imap2.c, mail.c/h, tenex.c] Put all cache management
		under the control of a single function which can be overridden
		by the main program.

16 June 1992	[os_ptx.c] Fix rimap on PTX.

17 June 1992	[ipop3d.c] Fix missing response in POP3 TOP command.

17 June 1992	[bezerk.c, tenex.c] Implement read only open in local drivers.

18 June 1992	[smtp.h] Remove prototype for smtp_parse_address().

18 June 1992	[Internals.DOC] Update and expand API document.

24 June 1992	[dawz.c/h] Started work on DOS local file driver.  Updates to
		it won't be documented until first release.

25 June 1992	[rfc822.c] Fixed crash caused by Content-Type with a subtype
		delimiter but no subtype.

25 June 1992	[imap2.c] Fix bug parsing body contents with short caches.

 1 July 1992	[rfc822.c] Fixed yet another bug in quoted-printable encoding.

 6 July 1992	[*dbw*, *dpc*] More changes to B&W and PC-TCP stuff from Ken
		Bobey.

 8 July 1992	[os_???.c] Fixed handling of CR's in tcp_getline().

12 July 1992	[mail.h] Added data1 and data2 to elt.

12 July 1992	[os_???.h, bezerk.c, dummy.c, mbox.c, mh.c, news.c, tenex.c]
		Move include of sys/uio.h to osdep.h files because not all
		Unix systems have it.

12 July 1992	[os_???.c/h, bezerk.c] New lockname() osdep routine to make a
		status lock file instead of being wired into bezerk.c code.

12 July 1992	[os_???.c/h, bezerk.c] NFSKLUDGE switch controls the NFS
		kludge, yet another concession for SCO cretinism.

14 July 1992	[os_sco.c/h, makefile.sco] More updates to SCO sources.

15 July 1992	[mail.c, imap2.c/h, bezerk.c, mh.c, news.c, tenex.c] Make
		cache flushing when recycling a stream be the driver's
		responsibility.  imap2 now uses the new data1/data2 elt words
		to hold its string cache pointers.

15 July 1992	[non-ANSI os_???.c] Fix lockname() definitions.

16 July 1992	[os_???.c/h] Yet another episode in the parsing of lines from
		TCP.  Fix lockname() definitions in non-ANSI sources again.

16 July 1992	[bezerk.c/h, mbox.c] Delete fname local stream variable.  Fix
		lock file name.

19 July 1992	[makefile.sco, os_sco.c] Yet more random updates to SCO stuff.

21 July 1992	[os_???.c/h, bezerk.c, dummy.c, imap2.c, mail.c, mbox.c, mh.c,
		 misc.c, mtest.c, news.c, nntp.c, smtp.c, tenex.c] Shuffled
		includes some more.  <sys/types.h> is now moved to the osdep
		file so the <sys/uio.h> includes work.  Deleted some UNIX
		dependent code.

21 July 1992	[os_???.c/h, imapd.c, ipop?d.c] Added argc and argv as
		arguments to server_login() for SCO's benefit.  What a
		troublesome operating system!

21 July 1992	[mtest.c] Put dawz hooks into mtest.

22 July 1992	[dawz.c/h] First release of dawz local file driver for DOS.
		Is presently missing MIME and text search capability, also does
		not support user keywords (although some hooks are there).

22 July 1992	[makefile.d??] Added dawz driver to DOS makefiles.

22 July 1992	[bezerk.c, imap2.c, mail.c, tenex.c] Fixed bogus references to
		mm_cache() function instead of (*mailcache) ().

23 July 1992	[os_sco.c/h] More SCO madness (the last time?).

23 July 1992	[imap2.c] Fixed rimapd behavior when the login is OK but there
		is no /etc/rimapd.

23 July 1992	[bezerk.c/h, mbox.c] Fix mbox behavior when bezerk mailbox is
		gubbish.

12 August 1992	[os_ptx.c/h, mh.c, news.c] Fixes for PTX.

13 August 1992	[os_ptx.c, news.c] More fixes for PTX.

20 August 1992	[mail.c, imap2.c] Fix missing cast of lelt and elt from
		mailcache function.

20 August 1992	[mh.c, news.c] PTX fixes of 13 August broke DYNIX.

31 August 1992	[rfc822.c] Fix comment-as-name handling when host is missing
		(thanks LGL!).

31 August 1992	[ReadWindow.nib, SendWindow.nib] Make EasyMail build again (it
		had been broken since the EMACS editing stuff was added).

 9 September 1992
		[bezerk.h/c] Fixed bad file closing bug when recycling a
		bezerk stream.

21 September 1992
		[lots of files] Major surgery to MIME parser to use a new
		concept called a `stringstruct' instead of char * strings.
		Stringstructs invoke a driver as necessary to get at string
		data; this is so we can do MIME parsing on machine such as
		DOS without enough memory to hold the entire message.  This
		involved major changes to rfc822_parse_content() in rfc822.c,
		changes to driver calling conventions, and lots of nasty little
		changes in lots of other files.  Nearly two months of effort
		went into this.  Ugh.

22 September 1992 [mtest.c]
		Add B command to mtest to display body structure, both as an
		example to implementors of how to run through the structures
		and to make it possible for me to test this stuff on DOS.

22 September 1992 [mail.c]
		Fixed missing cache flush when recycling to a mailbox of a
		different type.

22 September 1992 [dawz.c, os_d??.c]
		Added stringstruct/MIME parsing capability to dawz driver.

28 September 1992 [os_???.c/h] Add myusername() and myhomedir() functions to
		avoid repeated getpw???() calls in c-client.

30 September 1992 [bezerk.c] Memory performance improvements.

30 September 1992 [MailManager, EasyMail] Conversion to NeXTSTEP 3.0.

 1 October 1992	[bezerk.c, dawz.c, imap2.c, mail.c, mh.c, mtest.c, news.c,
		 rfc822.c, tenex.c] Allow NIL for body argument to
		mail_fetchstructure() meaning not to do MIME parsing.

 4 October 1992 [ReadWindow.m] Fix IMAP MIME reading broken by 3.0 conversion.

 7 October 1992 [makefile.a32, os_a32.c/h, makefile.dwa os_dwa.c/h]
		Added AIX 3.2 (for RS/6000) and Waterloo DOS ports.

13 October 1992	[mail.c/h] Added mail_cdate() to write cdate-format date/time.

13 October 1992 [makefile.sv4, os_sv4.c/h] Added SVR4 port.

13 October 1992	[dummy.c] Fix bug causing segmentation violation when you open
		a non-existant mailbox.

13 October 1992 [makefile.*] Move const deletion to non-ANSI makefiles to
		clean up confusion about when it's done and remove an include
		ordering dependency.

21 October 1992	[mail.c/h, bezerk.c, dawz.c, dummy.c, imap2.c, mbox.c, mh.c,
		 news.c, tenex.c] Defined prototype streams for use with
		mail_find(), mail_create(), etc. when no stream is actually
		open on a particular driver.

22 October 1992	[mail.c/h, bezerk.c, dawz.c, dummy.c, imap2.c, mbox.c, mh.c,
		 news.c, tenex.c] Added OP_PROTOTYPE to tell mail_open() to
		return the driver's prototype stream instead of a real stream.

22 October 1992	[mail.c/h, imap2.c] Added OP_HALFOPEN flag and halfopen stream
		status, to request (and indicate) half-open IMAP streams that
		have connections but no mailbox selected.

24 October 1992	[rfc822.c] Fix rfc822_binary() logic flaw caused by overly-
		hairy size calculation.

26 October 1992	[imap2.c] Properly implement "+" response from IMAP.

26 October 1992 [imapd.c] Fix disasterous bug in IMAP server literals.

27 October 1992	[os_ptx.c, os_sv4.c] Fix DST handling on SysV like systems.

27 October 1992	[os*.c/h] Add tcp_sout() for IMAP APPEND support.

29 October 1992	[os*.c] Fixed server_login() to set up group access properly.

 2 November 1992 [mail.c/h, bezerk.c/h, dawz.c/h, imap2.c/h, mbox.c/h, mh.c/h,
		  news.c/h, tenex.c/h] First version with IMAP2bis mail
		management support.

 2 November 1992 [mail.h, os*.c, rfc822.c] Change NXT macro to SNX.

 3 November 1992 [mail.c] [UN]SUBSCRIBE, DELETE, and RENAME now allow you to
		point at a mailbox accessed by a different driver than the one
		normally reached by that name.  This is to deal with the case
		of identically-named mailboxes in two different driver's
		namespaces.  I consider this an error, and CREATE won't let
		you do it, but you need to have some way to bail out if it
		happens.

 3 November 1992 [os_hpp.c] Add #include <sys/file.h> to get L_SET symbol.

 3 November 1992 [bezerk.c, tenex.c] Bugfixes to CREATE, DELETE, RENAME.

 5 November 1992 [os_a32.c/h] Updates to RS/6000 code.

 9 November 1992 [rfc822.c] Fix excessive generosity in accepting bogus header
		lines as being the real thing.

10 November 1992 [mail.c/h, bezerk.c, dawz.c, imap2.c, mbox.c, mh.c, news.c,
		  tenex.c] Implement new mailbox naming rules.

10 November 1992 [bezerk.c, tenex.c] Flush CR's in APPEND.

12 November 1992 [bezerk.c, tenex.c] Fix FIND ALL behavior with directory
		arguments.

14 November 1992 [MailManager.c] Flush .mailboxlist hacking code

16 November 1992 [imap2.c] Fix map_manage bug in error reporting.

16 November 1992 [ms.c] Add management capabilities to ms.  Make it sort the
		FIND results.

16 November 1992 [imap2.c, mail.c] Fix a number of silly bugs with IMAP mail
		management functions (CREATE, etc.)

19 November 1992 [mail.h, bezerk.c, imap2.c, mh.c, news.c/h, tenex.c,
		  sm_unix.c] Add concept of subscription manager for mailboxes
		 and teach drivers about it.

 3 December 1992 [imapd.c] Fixed some bogon messages in IMAP server.

 3 December 1992 [bezerk.c, mh.c, tenex.c, sm_unix.c] First distribution
		version of subscription manager stuff.

 3 December 1992 [imapd.c] Implement PARTIAL and PURGE commands, making imapd
		a full IMAP2bis compliant server.

 3 December 1992 [news.c, mail.c] Implement subscription stuff for news too.

 4 December 1992 [bezerk.c, mh.c, news.c, tenex.c, os_???.h, os_sv4.c] Another
		chapter in the sad story of <sys/dir.h> include order.

 8 December 1992 [news.c] Don't report non-existant newsgroups as subscribed.

 8 December 1992 [dawz.c/h, sm_dos.c] Finish IMAP2bis client stuff for DOS.

 8 December 1992 [imap2.c, mail.c] Fix compiler warnings when building on DOS.

 9 December 1992 [mbox.c] Fix bug in mbox_ping() which caused it to calculate
		the wrong bezerk file name.

 9 December 1992 [news.c] Yesterday's edit broke IMAP netnews glue.

10 December 1992 [news.c] December 8th's edit broke local news finding too!

11 December 1992 [rfc822.c] Fix rejection of MIME parsing when MIME-Version
		header line immediately follows Content header.

23 December 1992 [bezerk.*, mbox.c] We now know about 10 different ``From ''
		header date formats.

 5 January 1993 [os_sv4.c/h] Fix errors when building on SUN.

 5 January 1993	[mtest.c, makefile.*, nntpclient.c/h] Begin NNTP client work.

19 January 1993 [news.c] Fix bad fs_give in news_read().

20 January 1993	[mail.c] Fix memory leak in mm_cache CH_INIT function.

22 January 1993	[rfc822.c] Yet another chapter in the rfc822_binary() saga.

24 January 1993	[mail.c] Accept RFC-822 format dates in mail_parse_date().

25 January 1993 [dawz.c, nntpcdos.c/h, nntpclient.c/h, mtest.c] Finish NNTP
		 client, start DOS version.

25 January 1993	[dawz.c] Fix dawz_append() dates and write loop.

 2 February 1993 [nntpclient.c] Don't fetch NNTP message texts unnecessarily.

 2 February 1993 [dawz.c] Fix missing open mode in dawz_create().

 3 February 1993 [dawz.c] Fix missing length return from dawz_fetchbody().

 4 February 1993 [os_sun.c/h] Substitute local strstr() for system one since
		SUN's is abysmally slow!

10 February 1993 [dawz.c] Clean up various January 25's edit somewhat.

10 February 1993 [mail.c] Fix crash caused by recycle stream where new mailbox
		is an IMAP mailbox that can't be opened for some reason.

11 February 1993 [news.c] Fix bug with handling newsgroups not in .newsrc

11 February 1993 [tenex.c] Validate target type in tenex_copy_messages().

15 February 1993 [bezerk.c/h] Implement Kiss Of Death for mbox streams which
		have the read-write lock.

16 February 1993 [nntpc*.c] Fix missing error return in open code.

16 February 1993 [sm_unix.c] Fix bogus protection when creating subscription
		database.

16 February 1993 [nntpc*.c] NNTP client find code was quite bogus.

18 February 1993 [rfc822.c] Fix crash caused by empty Content-Type: line.

19 February 1993 [SendWindow.m] Change OCTET-DATA to OCTET-STREAM.

27 February 1993 [mail.c] Repeal naming rules wretched compromise.

2 March 1993	[makefile.a32, os_a32.c] Make it build properly on RS/6000.

3 March 1993	[bezerk.c] Fix embarassing bug in bezerk_copy_messages.

4 March 1993	[nntpcdos.c] Call nntp_read() instead of non-ex news_read()

9 March 1993	[os_hpp.c] Change rsh call to remsh.

9 March 1993	[nntpc*.c] Implement half-opens.

15 March 1993	[news.c] Fix brain-damage in find bboards.
